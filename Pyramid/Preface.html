<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Preface</title>
	<link rel="stylesheet" type="text/css" href="../libs/style.css">
	<script src="../libs/run_prettify.js?autoload=true&amp;lang=css" defer=""></script>
</head>

<h3 align = "center">
<a href="../index.html"> <span class=brown> Содержание  </span></a>
&emsp;&emsp;&emsp;
 <span class=brown>► &ensp;</span></a><a href="Chapter_01.html"> <span class=brown> Глава 1  </span></a>
</h3> 

<br>

<h2 align = "center"> <span class=brown>Three.js и геометрия.</span> &emsp; Введение </h2>

<p>
Технология <b>WebGL</b> используются в интернете для реализации самых разных целей, связанных с <b>3D</b> графикой.
Для облегчения использования <b>WebGL</b> были созданы библиотеки <b>ThreeJS, BabylonJS</b> и некоторые другие. 
На сегодняшний день библиотека <b>ThreeJS</b>, пожалуй, является наиболее популярной. Она имеет подробную 
документацию и большое количество рабочих примеров. В интернете имеется огромное количество статей
посвященных использованию этой библиотеки. Обычно в этих статьях делается упор на работу с уже
готовыми трехмерными моделями предварительно созданных, например, в программах <b>3ds Max</b> или <b>Blender</b>.
В самой библиотеке <b>ThreeJS</b> есть уже предустановленные типы геометрических объектов — плоскость, куб, сфера, тор,
которые можно комбинировать и изменять. Однако иногда возникают задачи создания и отображения 
в браузере параметрических моделей. Параметрическая модель - это модель у которой, в процессе 
отображения в браузере уже готового объекта, мы можем, однако, изменить его отдельные элементы при помощи 
задания соответствующих параметров модели.
К таким изменениям относятся не только растяжение/сжатие всей модели или отдельных
ее частей, но и возможность изменять ее отдельные элементы - увеличить/уменьшать углы наклона 
граней, изменять размеры <em>отдельных</em> элементов модели и производить другие локальные
и глобальные изменения модели. Причем необходимо производить такие изменения в реальном 
времени и интерактивно.
</p>
<p>
Для решения этих задач нам потребуется набор функций на языке <b>Javascript</b>, которые 
будут реализовывать методы применяемые в аналитической геометрии. В соответствующей библиотеке должны присутствовать 
функции для создания прямых, плоскостей и окружностей, нахождения точек (или прямых) пересечения 
их между собой, создания наклонных плоскостей и многое другое. 
В библиотеках <b>ThreeJS</b> и <b>BadylonJS</b> некоторые из этих возможностей присутствуют, но количество 
осуществляемых с помощью них действий не позволит выполнить все возникающие задачи при построении 
параметрической модели. Существуют еще несколько чисто математических <b>Javascript</b> библиотек. 
Из них наиболее широкое распространение получили <b>glMatrix</b> и <b>Sylvester</b>. 
Библиотека <b>glMatrix</b> в основном предназначена для работы с векторами, матрицами и кватернионами, 
но функций для работы с прямыми и плоскостями в ней нет. В библиотеке <b>Sylvester</b> подобные функции есть, 
но присутствуют они в достаточно ограниченном количестве.
</p>
<p>
Язык <b>C/C++</b> уже стал практически стандартом для создания программ трехмерной геометрии.
Но напрямую в браузере его использовать невозможно. Однако можно взять за основу 
существующие библиотеки геометрических функций на <b>C/C++</b> и на их основе создать соответствующую
<b>Javascript</b> библиотеку. Использованная для создания моделей библиотека <b>WebGeometry</b> на языке <b>JavaScript</b> 
была сделана именно таким образом. Как выглядят подобные библиотеки <b>на C/C++</b> можно увидеть в книге 
<b>Eric Lengyel "Foundations of Game Engine Development, Volume 1: Mathematics" </b>
или в более ранних книгах этого автора. На русском языке есть небольшая, но на мой взгляд очень
хорошая, книга выпущенная еще в 1984 году <b>Й.Энджел "Практическое введение в машинную графику"</b>.
В ней приведены на <b>Фортране</b> основные программы <b>2D</b> и <b>3D</b>-графики. 
Эта книга есть в интернете. 
</p>

<p>
Фактически все представленные главы этой работы представляют набор примеров объясняющих
как можно расчитывать с помощью функций входящих в состав библиотека <b>WebGeometry</b> сложные
многогранники и отображать их при помощи <b>ThreeJS</b> в браузере. 
Библиотека <b>ThreeJS</b> используется для вывода на экран уже рассчитанных моделей — для расчета 
формы моделей она не используется. Но возможности <b>ThreeJS</b> позволяют сделать
процесс отображения полностью интерактивным - вплоть до просмотра координат каждой точки
принадлежащей модели, наклоны и азимуты граней модели, названия граней и отображение номеров вершин модели 
(а таких вершин может быть гораздо больше <b>100</b>).

</p>
<p>
Очень часто для иллюстрации геометрических построений на экране компьютера берутся
платоновы или архимедовы тела, которые являются многогранниками. Их можно увидеть, например на 
следующем <a href="https://stemkoski.github.io/Three.js/Polyhedra.html"><b>сайте</b></a>.
Однако, для отображения на указанном сайте многогранников используются уже заранее расчитанные координаты 
вершин. Для моделей многогранников имеющих однородную (регулярную) структуру существуют уже готовые 
формулы и способы расчета координат вершин. Однородными называются те многогранники, 
все грани которых - правильные многоугольники и, кроме того, все многогранные углы которых 
равны. Иначе говоря, в однородных многогранниках каждую вершину окружают правильные 
многоугольники в одном и том же порядке. Для их расчета используется красивая и одновременно
достаточно сложная (<b>Coxeter H.S.M. "Regular Polytopes"</b>) но уже устоявшаяся математика. 
</p>
<p> 
Для создания моделей многогранников не имеющих полностью однородную структуру приходится 
делать самые разнообразные вычисления используя стандартную аналитическую геометрию.
Поэтому в качестве примеров многогранников были взяты 
огранки драгоценных и поделочных камней. Их грани обычно не представляют собой правильные
многоугольники. Но они красивы, обладают симметрией и при этом не являются
полностью регулярными - положение граней и вершин приходится всегда определять используя 
каждый раз новые способы их расчета.  Так как создаются эти многогранники строго по 
правилам геометрии и не допускают отступлений от этих правил, то расчет положения их вершин
хорошо подходит для иллюстрации использования функций библиотеки <b>WebGeometry</b> и 
последующего отображения при помощи <b>ThreeJS</b>. 
</p>

<p>
В каждой главе присутствует хотя бы одна полностью законченная
программа. Для понимания этих программ необходимо иметь некоторый опыт работы
с <b>Javascript</b>, хотя в этих программах используются самые простые конструкции языка.
Чуть более пристальное внимание следует обратить на обработку событий с 
использованием <b>Javascript</b>.
<br>
Для знакомства с <b>ThreeJS</b> можно рекомендовать <b>второе</b> издание книги <b>Хуана Диего Гоше 
"HTML5 Для профессионалов"</b> перевод которой вышел в 2015 году в издательстве "Питер". 
В главе <b>11</b> этой книги очень кратко, но в то же время доходчиво рассмотрены все основные 
элементы <b>ThreeJS</b> - рендерер, сцена, камера, материалы и др. 
При построении многогранников не рассматривается вопрос о том как создается
каркас программ с использованием библиотеки <b>ThreeJS</b> и работа ее стандартных функций.
Только в главах <b>1</b> и <b>2</b> разобраны некоторые моменты касающиеся <b>ThreeJS</b>.
</p>

<p>
Иногда требуется при расчетах моделей многогранников произвести некоторые поясняющие построения 
на плоскости. Для таких построений используется <b>2D</b>-холст <b>HTML5 canvas</b>.
В некоторых главах будут созданы полностью интерактивные <b>2D</b>-чертежи отдельных элементов
многогранников. С этой целью был разработан небольшой набор элементов для построения
таких чертежей. Каждый чертеж представляет собой специально масштабированный и
подогнанный (как в программах <b>CAD/CAM</b>) холст на который наносятся размеры, углы и т.д.
</p>

<p>
В главе <b>10</b> упомянутой ранее книги  <b>"HTML5 Для профессионалов"</b>рассмотрен <b>API Canvas</b>, 
функции которого используются для построения интерактивных <b>2D</b>-чертежей некоторых элементов 
моделей. 
</p>
<p>
Желательно также посмотреть некоторые книги по аналитической геометрии и линейной алгебре. 
При создании библиотеки <b>WebGeometry</b> в основном использовались две книги по геометрии.
Это <b>"Курс аналитической геометрии" Н.И. Мусхелишвили</b>, который был выпущен несколькими изданиями
и <b>"Краткий курс аналитической геометрии" Н.В. Ефимов</b> - было выпущено очень много изданий этой книги.
По линейной алгебре можно взять любую книгу, где хорошо разобрано использование матриц.
К сожалению я не нашел книг на русском языке в которых аналитическая геометрия была бы изложена
на языке линейной алгебры доступным и не использующим абстрактные математические 
конструкции образом. На английском языке такая книга существует - 
<b>"Practical Linear Algebra. A Geometry Toolbox"</b>. Ее авторы - <b>Gerald Farin</b> 
и <b>Dianne Hansford</b>.
</p>
<p>
Все тексты программ я старался делать как можно проще. Так же не пытался специально
ускорить выполнение программ за счет их оптимизации и сокращения, для того чтобы 
не потерялась ясность используемых методов построения моделей. 
</p>
<p>
Набрав в поисковике <b>google</b> два слова <b>"polyhedron webgl"</b> можно увидеть множество
сайтов на которых показано как создавать правильные, полуправильные и звездчатые 
многогрвнники для их отображения в браузере. Но найти методику построения в браузере
<b>произвольного</b> и к тому же <b>сложного</b> многогранника без <b>предварительно</b> 
расчитанных координат вершин мне не удалось. Поэтому надеюсь, что моя работа будет полезна
всем кто использует геометрию при построении параметрически настраиваемых 
<b>3D</b>-моделей в самых различных областях и не только при создании моделей многогранников,
но и при конструировании моделей других объектов.
</p>

<h3 align = "center">
<a href="../index.html"> <span class=brown> Содержание  </span></a>
&emsp;&emsp;&emsp;
 <span class=brown>► &ensp;</span></a><a href="Chapter_01.html"> <span class=brown> Глава 1  </span></a>
</h3> 

</body>
</html>